{% extends '@Dashboard/base.html.twig' %}

{% block title %}{{ page_title }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/settings.css') }}">
{% endblock %}

{% block body %}
    <!-- Main Content -->
    <div class="content-wrapper">
        <div class="row page-title">
            <h1 class="text-center mb-5">{{ page_title|trans }}</h1>
        </div>
        <div class="container">
            <div class="settings-page-content">
                <div class="profile-settings">
                    <!-- Left Menu -->
                    <div class="settings-menu">
                        <a href="#account" class="settings-menu-item" data-content="account">
                            <i class="fas fa-user"></i>
                            {{ 'settings.menu.account'|trans }}
                        </a>
                        <a href="#general" class="settings-menu-item" data-content="general">
                            <i class="fas fa-cog"></i>
                            {{ 'settings.menu.general'|trans }}
                        </a>
                        <a href="#notifications" class="settings-menu-item" data-content="notifications">
                            <i class="fas fa-bell"></i>
                            {{ 'settings.menu.notifications'|trans }}
                        </a>
                        <a href="#privacy" class="settings-menu-item" data-content="privacy">
                            <i class="fas fa-lock"></i>
                            {{ 'settings.menu.privacy'|trans }}
                        </a>
                    </div>

                    <!-- Right Content Area -->
                    <div class="settings-content">
                        <!-- Account Settings -->
                        <div id="account" class="settings-section">
                            <h2>{{ 'settings.menu.account'|trans }}</h2>
                            <div class="settings-form">
                                <!-- Account settings content will go here -->
                            </div>
                        </div>

                        <!-- General Settings -->
                        <div id="general" class="settings-section" style="display: none;">
                            <h2>{{ 'settings.menu.general'|trans }}</h2>
                            <div class="settings-form">
                                <!-- General settings content will go here -->
                            </div>
                        </div>

                        <!-- Notification Settings -->
                        <div id="notifications" class="settings-section" style="display: none;">
                            <h2>{{ 'settings.menu.notifications'|trans }}</h2>
                            <div class="settings-form">
                                <!-- Notification settings content will go here -->
                            </div>
                        </div>

                        <!-- Privacy Settings -->
                        <div id="privacy" class="settings-section" style="display: none;">
                            <h2>{{ 'settings.menu.privacy'|trans }}</h2>
                            <div class="settings-form">
                                <div class="account-actions">
                                    <div class="action-block">
                                        {% if settings.privacy.user_status == 1 %}
                                            <div id="deactivate-block">
                                                <h3>{{ 'settings.privacy.deactivation.title'|trans }}</h3>
                                                <p class="action-description">
                                                    {{ 'settings.privacy.deactivation.description'|trans }}
                                                </p>
                                                <button class="btn btn-warning" data-toggle="modal" data-target="#deactivateModal">
                                                    {{ 'settings.privacy.deactivation.button'|trans }}
                                                </button>
                                            </div>
                                        {% else %}
                                            <div id="activate-block">
                                                <h3>{{ 'settings.privacy.activation.title'|trans }}</h3>
                                                <p class="action-description">
                                                    {{ 'settings.privacy.activation.description'|trans }}
                                                </p>
                                                <button class="btn btn-success" id="activateAccount">
                                                    {{ 'settings.privacy.activation.button'|trans }}
                                                </button>
                                            </div>
                                        {% endif %}
                                    </div>

                                    <div class="action-block mt-4">
                                        <h3>{{ 'settings.privacy.deletion.title'|trans }}</h3>
                                        <p class="action-description">
                                            {{ 'settings.privacy.deletion.description'|trans }}
                                        </p>
                                        <button class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">
                                            {{ 'settings.privacy.deletion.button'|trans }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Deactivate Account Modal -->
                        <div class="modal fade" id="deactivateModal" tabindex="-1" role="dialog" aria-labelledby="deactivateModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="deactivateModalLabel">{{ 'settings.privacy.deactivation.modal.title'|trans }}</h5>
                                        <button type="button" class="close btn-close" aria-label="Close">
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <p>{{ 'settings.privacy.deactivation.modal.message'|trans }}</p>
                                        <ul class="deactivation-effects">
                                            <li>{{ 'settings.privacy.deactivation.modal.effects.profile_invisible'|trans }}</li>
                                            <li>{{ 'settings.privacy.deactivation.modal.effects.content_hidden'|trans }}</li>
                                            <li>{{ 'settings.privacy.deactivation.modal.effects.can_reactivate'|trans }}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary">{{ 'settings.privacy.deactivation.modal.cancel'|trans }}</button>
                                        <button type="button" class="btn btn-warning" id="confirmDeactivate">{{ 'settings.privacy.deactivation.modal.confirm'|trans }}</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Delete Account Modal -->
                        <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="deleteModalLabel">{{ 'settings.privacy.deletion.modal.title'|trans }}</h5>
                                        <button type="button" class="close btn-close" aria-label="Close">
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <p>{{ 'settings.privacy.deletion.modal.message'|trans }}</p>
                                        <ul class="deletion-effects">
                                            <li>{{ 'settings.privacy.deletion.modal.effects.data_deleted'|trans }}</li>
                                            <li>{{ 'settings.privacy.deletion.modal.effects.profile_removed'|trans }}</li>
                                            <li>{{ 'settings.privacy.deletion.modal.effects.no_recovery'|trans }}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary">{{ 'settings.privacy.deletion.modal.cancel'|trans }}</button>
                                        <button type="button" class="btn btn-danger" id="confirmDelete">{{ 'settings.privacy.deletion.modal.confirm'|trans }}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ asset('js/settings.js') }}"></script>
{% endblock %}
